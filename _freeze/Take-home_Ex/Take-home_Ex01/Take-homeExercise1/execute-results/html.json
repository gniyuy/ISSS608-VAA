{
  "hash": "00f6930734e980f572202f565fabce5d",
  "result": {
    "engine": "knitr",
    "markdown": "---\nformat: \n  html:\n    theme: lux\n    number-sections: true\n\ntitle: \"Take-home Exercise 1\"\nauthor: \"Tai Yu Ying\"\ndate: \"Apr 24 2025\"\ndate-modified: \"last-modified\"\nexecute: \n  eval: true\n  echo: true\n  message: false\n  freeze: true\n---\n\n\n\n### Overview and Background\n\nThis take-home exercise explores the demographic structure of Singapore in 2024 using the \"Singapore Residents by Planning Area / Subzone, Single Year of Age and Sex, June 2024\" dataset from the Department of Statistics (DOS). The aim is to develop three insightful and reproducible data visualisations using R, focusing on:\n\n1.  Population Pyramid for Singapore (2024)\n2.  Even-Aged New Towns\n3.  Sandwiched Generation Pressure Zones\n\nThese visualisations highlight national age structure, uniform age distribution in newer estates, and areas with dual caregiver burdens — offering rich demographic insights.\n\n### Installing and Loading the Required Libraries\n\n| **Library** | **Purpose** |\n|----|----|\n| `tidyverse` | Core data wrangling and manipulation (includes `dplyr`, `readr`, `tidyr`, etc.). Used for filtering, grouping, summarising, and joining datasets. |\n| `ggplot2` | Main plotting package for creating all data visualisations with a consistent grammar of graphics. |\n| `ggthemes` | Provides additional clean and publication-ready themes for `ggplot2`. Enhances visual appeal of charts. |\n| `scales` | Allows formatting of plot axes and labels (e.g., percentages, thousands separator). Used in y-axis label customisation. |\n| `forcats` | Part of the `tidyverse`; provides tools for handling and ordering categorical variables (factors). Useful for reordering bars in charts. |\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.4     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggthemes)\nlibrary(scales)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'scales'\n\nThe following object is masked from 'package:purrr':\n\n    discard\n\nThe following object is masked from 'package:readr':\n\n    col_factor\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(forcats)\n```\n:::\n\n\n\n### Importing Data\n\nFor the purpose of this exercise, a data file called `respopagesex2024.csv` will be used. It consists of the mid-year 2024 population estimates of Singapore residents by planning area, subzone, single year of age, and sex. It is in CSV file format and is published by the Department of Statistics, Singapore.\n\nThe code chunk below imports `respopagesex2024.csv` into the R environment using the `read_csv()` function from the `readr` package, which is part of the `tidyverse` collection.\n\nThere are a total of six attributes in the `df` tibble data frame:\n\n-   Four are categorical: `PA` (Planning Area), `SZ` (Subzone), `Sex`, and `Time` (Year)\n\n-   Two are numerical: `Age` (single year of age) and `Pop` (population count)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- read_csv(\"data/respopagesex2024.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 60424 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (4): PA, SZ, Age, Sex\ndbl (2): Pop, Time\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n### Data Wrangling\n\nTo ensure the dataset is ready for analysis and meaningful visualisation, the data wrangling steps are presented below with each step explained followed by the corresponding code.\n\n#### 1. General Cleaning\n\n**Step 1: Convert Age column to numeric**\\\nThe original `Age` column contains the value \"100+\", which must be recoded to 100 to allow numerical operations such as sorting, filtering, and aggregation.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- df %>%\n  mutate(Age = ifelse(Age == \"100+\", 100, as.numeric(Age)))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `Age = ifelse(Age == \"100+\", 100, as.numeric(Age))`.\nCaused by warning in `ifelse()`:\n! NAs introduced by coercion\n```\n\n\n:::\n:::\n\n\n\n#### 2. For Population Pyramid (Visualisation 1)\n\n**Step 2: Aggregate national totals by age and sex**\\\nTo visualise Singapore's population pyramid, we sum up the population across all planning areas and subzones, grouped by `Age` and `Sex`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_national <- df %>%\n  group_by(Age, Sex) %>%\n  summarise(Pop = sum(Pop), .groups = \"drop\")\n```\n:::\n\n\n\n#### 3. For Even-Aged New Towns (Visualisation 2)\n\n**Step 3: Filter for working-age group (25–45) and compute variation**\\\nWe assess the concentration of residents aged 25 to 45 in each planning area. A low standard deviation indicates a more uniform (even-aged) distribution.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\neven_age_data <- df %>%\n  filter(Age >= 25 & Age <= 45) %>%\n  group_by(PA, Age) %>%\n  summarise(Pop = sum(Pop), .groups = \"drop\") %>%\n  group_by(PA) %>%\n  summarise(SD = sd(Pop)) %>%\n  arrange(SD)\n```\n:::\n\n\n\n#### 4. For Sandwiched Generation Pressure Zones (Visualisation 3)\n\n**Step 4: Prepare planning area-level age distribution**\\\nWe group by planning area, age, and sex to create a baseline population profile for each area. This step enables the creation of structured age bands by location.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplanning_data <- df %>%\n  group_by(PA, Age, Sex) %>%\n  summarise(Pop = sum(Pop), .groups = \"drop\")\n```\n:::\n\n\n\n**Step 5: Calculate total population per planning area**\\\nThis is needed to later compute the proportion of children and elderly per planning area.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntotal_by_pa <- planning_data %>%\n  group_by(PA) %>%\n  summarise(Total = sum(Pop), .groups = \"drop\")\n```\n:::\n\n\n\n**Step 6: Classify population into Children, Working-Age, and Elderly**\\\nWe assign age groups based on standard dependency brackets: Children (0–14), Elderly (65+), and Working-Age (15–64).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_agegroup <- planning_data %>%\n  mutate(AgeGroup = case_when(\n    Age <= 14 ~ \"Children\",\n    Age >= 65 ~ \"Elderly\",\n    TRUE ~ \"Working-Age\"\n  )) %>%\n  group_by(PA, AgeGroup) %>%\n  summarise(Pop = sum(Pop), .groups = \"drop\") %>%\n  left_join(total_by_pa, by = \"PA\") %>%\n  mutate(Prop = Pop / Total)\n```\n:::\n\n\n\n**Step 7: Pivot data for comparison**\\\nWe reshape the data to wide format so that each planning area has columns for each age group proportion. This facilitates calculating pressure ratios.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsandwiched_data <- data_agegroup %>%\n  select(PA, AgeGroup, Prop) %>%\n  pivot_wider(names_from = AgeGroup, values_from = Prop)\n\neven_age_data <- planning_data %>%\n  filter(Age >= 25 & Age <= 45) %>%\n  group_by(PA, Age) %>%\n  summarise(Pop = sum(Pop), .groups = \"drop\") %>%\n  group_by(PA) %>%\n  summarise(SD = sd(Pop)) %>%\n  arrange(SD)\n```\n:::\n\n\n\n### Visualisation 1: Population Pyramid for Singapore (2024)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Prepare pyramid data\ndf_pyramid <- df_national %>%\n  mutate(Pop = ifelse(Sex == \"Males\", -Pop, Pop))\n\n# Plot\nggplot(df_pyramid, aes(x = Age, y = Pop, fill = Sex)) +\n  geom_bar(stat = \"identity\", width = 1) +\n  scale_y_continuous(labels = abs, name = \"Population\") +\n  labs(title = \"Population Pyramid of Singapore, 2024\", x = \"Age\") +\n  theme_minimal() +\n  scale_fill_manual(values = c(\"#6497b1\", \"#ff9999\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values or values outside the scale range\n(`geom_bar()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Take-homeExercise1_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n**Write-up (Visualisation 1):**\\\nThe population pyramid for Singapore in 2024 reveals a relatively even distribution among the working-age population, with noticeable tapering at both ends. The pyramid shows a broader base among those aged 30–45, reflecting the BTO baby boom. A gender imbalance becomes prominent from age 70 onward, with females outnumbering males — a typical pattern due to longevity differences. This visual underscores the dual challenge of a shrinking youth population and a growing elderly cohort.\n\n------------------------------------------------------------------------\n\n### Visualisation 2: Even-Aged New Towns\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Select top 10 towns with lowest SD\neven_age_data_top <- even_age_data %>%\n  slice_min(SD, n = 10)\n\n# Plot\nggplot(even_age_data_top, aes(x = fct_reorder(PA, SD), y = SD)) +\n  geom_col(fill = \"steelblue\") +\n  coord_flip() +\n  labs(title = \"Top 10 Even-Aged New Towns (Ages 25–45)\",\n       x = \"Planning Area\", y = \"Standard Deviation of Population (25–45)\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](Take-homeExercise1_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n**Write-up (Visualisation 2):**\\\nThis visualisation ranks Singapore’s planning areas by the uniformity of their 25–45 age group populations. Newer estates like Punggol and Sengkang exhibit low standard deviation, indicating a concentrated cluster of residents in their late 20s to 40s — the result of batch BTO rollouts over the past decade. These “even-aged” new towns suggest planned demographic engineering, but also raise questions about future ageing synchrony in these towns.\n\n------------------------------------------------------------------------\n\n### Visualisation 3: Sandwiched Generation Pressure Zones\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Select top towns with high children + elderly share\nsandwiched_plot <- sandwiched_data %>%\n  mutate(Combined = Children + Elderly) %>%\n  arrange(desc(Combined)) %>%\n  slice_max(Combined, n = 10)\n\n# Plot\nggplot(sandwiched_plot, aes(x = fct_reorder(PA, Combined), y = Combined)) +\n  geom_col(fill = \"darkorange\") +\n  coord_flip() +\n  labs(title = \"Top 10 Pressure Zones for Sandwiched Generation\",\n       x = \"Planning Area\", y = \"Combined Share of Children and Elderly\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](Take-homeExercise1_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n**Write-up (Visualisation 3):**\\\nThis chart identifies the top 10 planning areas with the highest combined proportion of children (0–14) and seniors (65+), indicating zones with heavy caregiving demands. Places like Yishun and Woodlands top the list, suggesting families here are likely balancing childcare and eldercare. These pressure zones underscore the importance of localized infrastructure like childcare, eldercare, and caregiver support services.\n\n### Conclusion\n\nThis take-home exercise demonstrates how publicly available demographic data can be transformed into meaningful insights through thoughtful wrangling and visual storytelling. By employing tidyverse-based data processing and ggplot2 visualisations, we highlighted Singapore’s evolving population structure in 2024.\n\nThe population pyramid provided a macro view of national age and gender distribution. The analysis of even-aged new towns revealed spatial demographic uniformity in younger estates, which may face synchronous ageing in the future. Lastly, the identification of sandwiched generation pressure zones spotlighted towns where the burden of dual caregiving is highest — a critical consideration for policy planners.\n\nTogether, these three visualisations offer complementary perspectives on Singapore’s demographic challenges and opportunities. This analytical framework can support deeper exploration of urban planning, healthcare allocation, and intergenerational policy design.\n",
    "supporting": [
      "Take-homeExercise1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}