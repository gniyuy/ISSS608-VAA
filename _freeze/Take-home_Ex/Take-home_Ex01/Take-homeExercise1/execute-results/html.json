{
  "hash": "870346ea9558410134605cecaa913852",
  "result": {
    "engine": "knitr",
    "markdown": "---\nformat: \n  html:\n    theme: lux\n    number-sections: true\n\ntitle: \"Take-home Exercise 1.1\"\nauthor: \"Tai Yu Ying\"\ndate: \"Apr 24 2025\"\ndate-modified: \"last-modified\"\nexecute: \n  eval: true\n  echo: true\n  message: false\n  freeze: true\n---\n\n\n\n### Overview and Background\n\nThis take-home exercise explores the demographic structure of Singapore in 2024 using the \"Singapore Residents by Planning Area / Subzone, Single Year of Age and Sex, June 2024\" dataset from the Department of Statistics (DOS). The aim is to develop three insightful and reproducible data visualisations using R, focusing on:\n\n1.  Population Pyramid for Singapore (2024)\n2.  Even-Aged New Towns\n3.  Sandwiched Generation Pressure Zones\n\nThese visualisations highlight national age structure, uniform age distribution in newer estates, and areas with dual caregiver burdens — offering rich demographic insights.\n\n### Installing and Loading the Required Libraries\n\n| **Library** | **Purpose** |\n|------------------------------------|------------------------------------|\n| `tidyverse` | Core data wrangling and manipulation (includes `dplyr`, `readr`, `tidyr`, etc.). Used for filtering, grouping, summarising, and joining datasets. |\n| `ggplot2` | Main plotting package for creating all data visualisations with a consistent grammar of graphics. |\n| `ggthemes` | Provides additional clean and publication-ready themes for `ggplot2`. Enhances visual appeal of charts. |\n| `scales` | Allows formatting of plot axes and labels (e.g., percentages, thousands separator). Used in y-axis label customisation. |\n| `forcats` | Part of the `tidyverse`; provides tools for handling and ordering categorical variables (factors). Useful for reordering bars in charts. |\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.4     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggthemes)\nlibrary(scales)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'scales'\n\nThe following object is masked from 'package:purrr':\n\n    discard\n\nThe following object is masked from 'package:readr':\n\n    col_factor\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(forcats)\n```\n:::\n\n\n\n### Importing Data\n\nFor the purpose of this exercise, a data file called `respopagesex2024.csv` will be used. It consists of the mid-year 2024 population estimates of Singapore residents by planning area, subzone, single year of age, and sex. It is in CSV file format and is published by the Department of Statistics, Singapore.\n\nThe code chunk below imports `respopagesex2024.csv` into the R environment using the `read_csv()` function from the `readr` package, which is part of the `tidyverse` collection.\n\nThere are a total of six attributes in the `df` tibble data frame:\n\n-   Four are categorical: `PA` (Planning Area), `SZ` (Subzone), `Sex`, and `Time` (Year)\n\n-   Two are numerical: `Age` (single year of age) and `Pop` (population count)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- read_csv(\"data/respopagesex2024.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 60424 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (4): PA, SZ, Age, Sex\ndbl (2): Pop, Time\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n### Data Wrangling\n\nTo ensure the dataset is ready for analysis and meaningful visualisation, the data wrangling steps are presented below with each step explained followed by the corresponding code.\n\n#### 1. General Cleaning\n\n**Step 1: Convert Age column to numeric**\\\nThe original `Age` column contains the value \"100+\", which must be recoded to 100 to allow numerical operations such as sorting, filtering, and aggregation.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- df %>%\n  mutate(Age = case_when(\n    Age == \"90_and_Over\" ~ \"90\",\n    TRUE ~ Age\n  ),\n  Age = as.numeric(Age))\n```\n:::\n\n\n\n#### 2. For Population Pyramid (Visualisation 1)\n\n**Step 2: Aggregate national totals by age and sex**\\\nTo visualise Singapore's population pyramid, we sum up the population across all planning areas and subzones, grouped by `Age` and `Sex`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_national <- df %>%\n  group_by(Age, Sex) %>%\n  summarise(Pop = sum(Pop), .groups = \"drop\")\n\ndf_national_band <- df_national %>%\n  mutate(AgeGroup = case_when(\n    Age < 10              ~ \"0-9\",\n    Age >= 10 & Age < 20  ~ \"10-19\",\n    Age >= 20 & Age < 30  ~ \"20-29\",\n    Age >= 30 & Age < 40  ~ \"30-39\",\n    Age >= 40 & Age < 50  ~ \"40-49\",\n    Age >= 50 & Age < 60  ~ \"50-59\",\n    Age >= 60 & Age < 70  ~ \"60-69\",\n    Age >= 70 & Age < 80  ~ \"70-79\",\n    Age >= 80 & Age < 90  ~ \"80-89\",\n    Age >= 90             ~ \"90 and over\"\n  )) %>%\n  group_by(AgeGroup, Sex) %>%\n  summarise(Pop = sum(Pop), .groups = \"drop\") %>%\n  mutate(AgeGroup = factor(AgeGroup, levels = c(\n    \"0-9\", \"10-19\", \"20-29\", \"30-39\", \"40-49\", \"50-59\",\n    \"60-69\", \"70-79\", \"80-89\", \"90 and over\"\n  )))\n```\n:::\n\n\n\n#### 3. For Even-Aged New Towns (Visualisation 2)\n\n**Step 3: Identify even-aged towns using Top 3 Age Group Share**\n\nWe measure the proportion of residents concentrated in the top 3 age groups within each planning area. A higher share suggests a more even-aged population profile, often seen in newer or low-density estates.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Compute top 3 age group share for each Planning Area\ntop3_share <- df %>%\n  group_by(PA, Age) %>%\n  summarise(total = sum(Pop), .groups = \"drop\") %>%  # Sum population by Planning Area and Age\n  group_by(PA) %>%\n  mutate(total_pa = sum(total)) %>%                  # Calculate total population per planning area\n  arrange(PA, desc(total)) %>%                       # Sort age groups by population within each PA\n  group_by(PA) %>%\n  slice(1:3) %>%                                      # Select the top 3 most populous age groups\n  summarise(top3_share = sum(total) / first(total_pa)) %>%  # Compute their share of total PA population\n  arrange(desc(top3_share)) %>%                      # Rank planning areas by this share\n  slice_head(n = 15)                                  # Keep the top 15 most even-aged towns\n\n# Prepare the data\ntop3_table <- top3_share %>%\n  mutate(rank = row_number(),\n         pct_label = paste0(sprintf(\"%.1f\", top3_share * 100), \"%\"))\n```\n:::\n\n\n\n#### 4. For Sandwiched Generation Pressure Zones (Visualisation 3)\n\n**Step 4: Identify high-pressure planning areas for the sandwiched generation**\n\nWe calculate the combined population share of children (aged 0–14) and elderly (aged 65 and above) in each planning area. These two groups typically require caregiving support, and a higher combined share suggests a greater likelihood of caregiving burden on the working-age population (the so-called \"sandwiched generation\"). This step helps identify areas with the greatest dual caregiving pressures, which are useful for informing policy on eldercare, childcare, and caregiver support infrastructure. The results are visualised using dot plots for clearer comparison across the top 10 pressure zones.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create new column to label children and elderly\npressure_data <- df %>%\n  mutate(\n    age_group = as.numeric(as.character(Age)),       # Convert age to numeric for comparison\n    category = case_when(                            # Categorise into Child, Elderly, or Other\n      age_group <= 14 ~ \"Child\",\n      age_group >= 65 ~ \"Elderly\",\n      TRUE ~ \"Other\"\n    )\n  ) %>%\n  group_by(PA, category) %>%\n  summarise(Pop = sum(Pop), .groups = \"drop\") %>%    # Total population by planning area and age category\n  tidyr::pivot_wider(\n    names_from = category, \n    values_from = Pop, \n    values_fill = 0                                  # Fill missing values with 0\n  ) %>%\n  mutate(\n    Total = Child + Elderly + Other,                 # Calculate total population in each planning area\n    combined_share = (Child + Elderly) / Total       # Compute combined share of children and elderly\n  ) %>%\n  select(PA, combined_share) %>%                     # Keep only relevant columns\n  arrange(desc(combined_share)) %>%                  # Rank by highest pressure (combined share)\n  slice_head(n = 10)                                 # Select top 10 pressure zones\n```\n:::\n\n\n\n### Visualisation 1: Population Pyramid for Singapore, 2024\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df_national_band, aes(x = AgeGroup, y = Pop, fill = Sex)) +\n  geom_col(position = position_dodge(width = 0.9), width = 0.8, colour = \"white\") +\n  scale_fill_manual(values = c(\"Females\" = \"#ff9999\", \"Males\" = \"#6497b1\")) +\n  scale_y_continuous(labels = scales::comma_format()) +\n  labs(title = \"Population Pyramid of Singapore, 2024\",\n       x = \"Age Group\", y = \"Population\") +\n  theme_minimal(base_size = 12) +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](Take-homeExercise1_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n### Write Up for Visualisation 1: Population Pyramid for Singapore, 2024\n\nIn 2024, Singapore’s demographic structure reflects a mature population with significant policy implications. The population pyramid reveals a bulge in the working-age groups (30–59), indicating a strong but aging workforce. Youth segments (0–19) are relatively smaller, pointing to declining birth rate. A trend that aligns with national concerns over fertility and population replacement. The elderly population (aged 70 and above) is growing, driven by longer life expectancies and the aging of the baby boomer cohort. This shift intensifies pressure on healthcare infrastructure, eldercare services, and CPF retirement adequacy. Current policies such as the Action Plan for Successful Ageing and enhancements to pro-family schemes aim to address these demographic challenges. With a shrinking base of younger citizens, Singapore is also recalibrating immigration strategies and upskilling efforts to maintain economic competitiveness. The demographic distribution in 2024 thus reinforces the urgency of forward-looking social and economic planning to adapt to a rapidly greying society.\n\n------------------------------------------------------------------------\n\n### Visualisation 2: Even-Aged New Towns\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(top3_table, aes(x = \"Top 3 Age Group Share\", y = reorder(PA, -top3_share))) +\n  geom_tile(aes(fill = top3_share), color = \"white\", width = 1, height = 0.9) +\n  geom_text(aes(label = pct_label), color = \"white\", size = 4.5) +\n  scale_fill_gradient(low = \"#d9f0d3\", high = \"#00441b\") +\n  labs(\n    title = \"Top 15 Even-Aged New Towns\",\n    subtitle = \"Ranking table with conditional formatting\",\n    x = NULL, y = NULL\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    axis.text.x = element_text(angle = 0, hjust = 0.5),\n    axis.ticks = element_blank(),\n    panel.grid = element_blank(),\n    axis.text.y = element_text(size = 12),\n    plot.title = element_text(face = \"bold\")\n  )\n```\n\n::: {.cell-output-display}\n![](Take-homeExercise1_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n### Write Up for Visualisation 2: Even-Aged New Towns\n\nIn 2024, Singapore’s demographic distribution highlights sharp age concentration in several planning areas with small or transitional populations. Topping the list is Seletar, which exhibits the most even-aged structure likely a reflection of its limited residential base and new, clustered private housing developments. Other top-ranking areas like Museum, Western Water Catchment, and Southern Islands have similarly low and niche populations, often dominated by specific age groups due to institutional or non-residential land use. Tengah, a newly launched HDB town, features prominently as a youthful, family-oriented area shaped by Build-to-Order (BTO) launches, while Punggol continues its trend as a hub for young families. These demographic pockets point to planning areas with either a very small population or targeted residential growth. Recognizing such age clusters is crucial for anticipating demand in childcare, schooling, and youth-centric services, and for ensuring that infrastructure investments match population composition in evolving districts.\n\n------------------------------------------------------------------------\n\n### Visualisation 3: Sandwiched Generation Pressure Zones\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pressure_data, aes(x = combined_share, y = reorder(PA, combined_share))) +\n  geom_point(size = 4, color = \"darkorange\") +\n  geom_text(aes(label = scales::percent(combined_share, accuracy = 1)), \n            hjust = -0.3, size = 3.5) +\n  labs(\n    title = \"Top 10 Pressure Zones for Sandwiched Generation\",\n    subtitle = \"Combined share of children (0–14) and elderly (65+)\",\n    x = \"Combined Share\",\n    y = \"Planning Area\"\n  ) +\n  scale_x_continuous(labels = scales::percent_format(accuracy = 1),\n                     expand = expansion(mult = c(0, 0.15))) +\n  theme_minimal(base_size = 13)\n```\n\n::: {.cell-output-display}\n![](Take-homeExercise1_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n### Write Up for Visualisation 3: Sandwiched Generation Pressure Zones\n\nIn 2024, Singapore’s demographic data reveals mounting pressures on the sandwiched generation. Those caring for both children and elderly parents. Planning areas like Outram, Ang Mo Kio, and Bukit Merah rank highest in combined shares of young (0–14) and elderly (65+) residents. These mature estates often house multigenerational families, leading to dual caregiving responsibilities. This aligns with national concerns over ageing and low fertility, and highlights the need for targeted support. Recent initiatives, such as the Caregivers Support Action Plan and enhancements to eldercare and childcare schemes, aim to ease these burdens. As household structures evolve, planning for childcare services, eldercare facilities, and flexible work arrangements will become increasingly important in these pressure zones. Recognising where these dual demands are most concentrated helps policymakers deliver timely, place-based interventions. The data offers a snapshot of where intergenerational stress is most acute and where support systems must be strengthened to ensure family resilience.\n\n### Conclusion\n\nThe population pyramid of Singapore in 2024 reveals a broad-based working-age demographic concentrated between ages 30 and 59, reflecting the maturing profile of a developed nation. However, visualisations on spatial distribution highlight distinct patterns. The *Top 15 Even-Aged New Towns* analysis shows areas like Seletar, Museum, and Tengah with highly concentrated age groups likely driven by new housing projects or limited residential diversity. In contrast, the *Top 10 Pressure Zones for the Sandwiched Generation* including Outram, Bukit Merah, and Ang Mo Kio which exhibit high combined shares of children and elderly. These mature estates place greater caregiving pressure on the working-age population. Together, the analyses underscore a dual planning challenge: supporting young, demographically uniform towns with services for growing families, while reinforcing caregiving infrastructure in ageing districts. Tailored interventions across planning areas are essential for sustaining Singapore’s long-term social resilience in the face of evolving age dynamics.\n",
    "supporting": [
      "Take-homeExercise1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}